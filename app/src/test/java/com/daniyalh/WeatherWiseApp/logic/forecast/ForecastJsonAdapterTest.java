package com.daniyalh.WeatherWiseApp.logic.forecast;

import com.daniyalh.WeatherWiseApp.logic.exceptions.InvalidJsonParsingException;
import com.daniyalh.WeatherWiseApp.objects.Forecast;
import static org.junit.Assert.*;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class ForecastJsonAdapterTest {
    private ForecastJsonAdapter forecastJsonAdapter;

    @Before
    public void setUp() {
        forecastJsonAdapter = new ForecastJsonAdapter();
    }

    @Test
    public void testParseForecast_Success() {
        System.out.println("----- Starting ForecastJsonAdapterTest -----");
        System.out.println("\nStarting validJSONParsing...");
        // Arrange
        String sampleJson = "{\"cod\":\"200\",\"message\":0,\"cnt\":40,\"list\":[{\"dt\":1738562400,\"main\":{\"temp\":1.31,\"feels_like\":-0.86,\"temp_min\":1.31,\"temp_max\":2.36,\"pressure\":1025,\"sea_level\":1025,\"grnd_level\":1020,\"humidity\":93,\"temp_kf\":-1.05},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":54},\"wind\":{\"speed\":1.94,\"deg\":199,\"gust\":3.96},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-03 06:00:00\"},{\"dt\":1738573200,\"main\":{\"temp\":2.58,\"feels_like\":0.9,\"temp_min\":2.58,\"temp_max\":3.47,\"pressure\":1025,\"sea_level\":1025,\"grnd_level\":1021,\"humidity\":93,\"temp_kf\":-0.89},\"weather\":[{\"id\":802,\"main\":\"Atmosphere\",\"description\":\"mist\",\"icon\":\"03d\"}],\"clouds\":{\"all\":39},\"wind\":{\"speed\":1.71,\"deg\":194,\"gust\":6.9},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-03 09:00:00\"},{\"dt\":1738584000,\"main\":{\"temp\":6.12,\"feels_like\":4.65,\"temp_min\":6.12,\"temp_max\":6.12,\"pressure\":1025,\"sea_level\":1025,\"grnd_level\":1020,\"humidity\":86,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":64},\"wind\":{\"speed\":2.02,\"deg\":163,\"gust\":6.77},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-03 12:00:00\"},{\"dt\":1738594800,\"main\":{\"temp\":7.42,\"feels_like\":4.88,\"temp_min\":7.42,\"temp_max\":7.42,\"pressure\":1023,\"sea_level\":1023,\"grnd_level\":1019,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.91,\"deg\":194,\"gust\":10.52},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-03 15:00:00\"},{\"dt\":1738605600,\"main\":{\"temp\":6.29,\"feels_like\":4.54,\"temp_min\":6.29,\"temp_max\":6.29,\"pressure\":1024,\"sea_level\":1024,\"grnd_level\":1019,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":2.36,\"deg\":207,\"gust\":8.27},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-03 18:00:00\"},{\"dt\":1738616400,\"main\":{\"temp\":4.98,\"feels_like\":3.04,\"temp_min\":4.98,\"temp_max\":4.98,\"pressure\":1024,\"sea_level\":1024,\"grnd_level\":1020,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":15},\"wind\":{\"speed\":2.31,\"deg\":197,\"gust\":9.92},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-03 21:00:00\"},{\"dt\":1738627200,\"main\":{\"temp\":5.51,\"feels_like\":3.3,\"temp_min\":5.51,\"temp_max\":5.51,\"pressure\":1024,\"sea_level\":1024,\"grnd_level\":1019,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":15},\"wind\":{\"speed\":2.75,\"deg\":199,\"gust\":10.8},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-04 00:00:00\"},{\"dt\":1738638000,\"main\":{\"temp\":6.86,\"feels_like\":3.99,\"temp_min\":6.86,\"temp_max\":6.86,\"pressure\":1023,\"sea_level\":1023,\"grnd_level\":1018,\"humidity\":89,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":66},\"wind\":{\"speed\":4.3,\"deg\":196,\"gust\":11.86},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-04 03:00:00\"},{\"dt\":1738648800,\"main\":{\"temp\":5.72,\"feels_like\":2.57,\"temp_min\":5.72,\"temp_max\":5.72,\"pressure\":1022,\"sea_level\":1022,\"grnd_level\":1018,\"humidity\":96,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":51},\"wind\":{\"speed\":4.32,\"deg\":197,\"gust\":11.63},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-04 06:00:00\"},{\"dt\":1738659600,\"main\":{\"temp\":7.95,\"feels_like\":5.12,\"temp_min\":7.95,\"temp_max\":7.95,\"pressure\":1022,\"sea_level\":1022,\"grnd_level\":1017,\"humidity\":79,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":97},\"wind\":{\"speed\":4.79,\"deg\":191,\"gust\":11.32},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-04 09:00:00\"},{\"dt\":1738670400,\"main\":{\"temp\":9.65,\"feels_like\":6.76,\"temp_min\":9.65,\"temp_max\":9.65,\"pressure\":1021,\"sea_level\":1021,\"grnd_level\":1017,\"humidity\":75,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":74},\"wind\":{\"speed\":6.13,\"deg\":209,\"gust\":14.1},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-04 12:00:00\"},{\"dt\":1738681200,\"main\":{\"temp\":9.88,\"feels_like\":6.92,\"temp_min\":9.88,\"temp_max\":9.88,\"pressure\":1021,\"sea_level\":1021,\"grnd_level\":1016,\"humidity\":75,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":64},\"wind\":{\"speed\":6.54,\"deg\":214,\"gust\":13.74},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-04 15:00:00\"},{\"dt\":1738692000,\"main\":{\"temp\":9.56,\"feels_like\":6.95,\"temp_min\":9.56,\"temp_max\":9.56,\"pressure\":1022,\"sea_level\":1022,\"grnd_level\":1018,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":82},\"wind\":{\"speed\":5.23,\"deg\":228,\"gust\":11.38},\"visibility\":10000,\"pop\":0.2,\"rain\":{\"3h\":0.12},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-04 18:00:00\"},{\"dt\":1738702800,\"main\":{\"temp\":8.07,\"feels_like\":5.54,\"temp_min\":8.07,\"temp_max\":8.07,\"pressure\":1026,\"sea_level\":1026,\"grnd_level\":1022,\"humidity\":80,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":4.19,\"deg\":251,\"gust\":10.51},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-04 21:00:00\"},{\"dt\":1738713600,\"main\":{\"temp\":6.23,\"feels_like\":3.56,\"temp_min\":6.23,\"temp_max\":6.23,\"pressure\":1030,\"sea_level\":1030,\"grnd_level\":1025,\"humidity\":86,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":58},\"wind\":{\"speed\":3.66,\"deg\":255,\"gust\":10.45},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-05 00:00:00\"},{\"dt\":1738724400,\"main\":{\"temp\":5.23,\"feels_like\":2.62,\"temp_min\":5.23,\"temp_max\":5.23,\"pressure\":1032,\"sea_level\":1032,\"grnd_level\":1028,\"humidity\":89,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":3.23,\"deg\":250,\"gust\":10.19},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-05 03:00:00\"},{\"dt\":1738735200,\"main\":{\"temp\":4.19,\"feels_like\":1.77,\"temp_min\":4.19,\"temp_max\":4.19,\"pressure\":1035,\"sea_level\":1035,\"grnd_level\":1031,\"humidity\":86,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":2.7,\"deg\":266,\"gust\":8.31},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-05 06:00:00\"},{\"dt\":1738746000,\"main\":{\"temp\":4.48,\"feels_like\":2.17,\"temp_min\":4.48,\"temp_max\":4.48,\"pressure\":1038,\"sea_level\":1038,\"grnd_level\":1034,\"humidity\":79,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":60},\"wind\":{\"speed\":2.64,\"deg\":286,\"gust\":8.64},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-05 09:00:00\"},{\"dt\":1738756800,\"main\":{\"temp\":7.01,\"feels_like\":4.83,\"temp_min\":7.01,\"temp_max\":7.01,\"pressure\":1040,\"sea_level\":1040,\"grnd_level\":1036,\"humidity\":60,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":63},\"wind\":{\"speed\":3.14,\"deg\":307,\"gust\":6},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-05 12:00:00\"},{\"dt\":1738767600,\"main\":{\"temp\":7.58,\"feels_like\":5.29,\"temp_min\":7.58,\"temp_max\":7.58,\"pressure\":1041,\"sea_level\":1041,\"grnd_level\":1037,\"humidity\":56,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":98},\"wind\":{\"speed\":3.51,\"deg\":320,\"gust\":5.62},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-05 15:00:00\"},{\"dt\":1738778400,\"main\":{\"temp\":5.69,\"feels_like\":4.11,\"temp_min\":5.69,\"temp_max\":5.69,\"pressure\":1043,\"sea_level\":1043,\"grnd_level\":1039,\"humidity\":72,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":2.06,\"deg\":334,\"gust\":6.24},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-05 18:00:00\"},{\"dt\":1738789200,\"main\":{\"temp\":4.45,\"feels_like\":2.9,\"temp_min\":4.45,\"temp_max\":4.45,\"pressure\":1045,\"sea_level\":1045,\"grnd_level\":1040,\"humidity\":79,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":1.84,\"deg\":360,\"gust\":6.88},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-05 21:00:00\"},{\"dt\":1738800000,\"main\":{\"temp\":3.38,\"feels_like\":2.09,\"temp_min\":3.38,\"temp_max\":3.38,\"pressure\":1045,\"sea_level\":1045,\"grnd_level\":1041,\"humidity\":79,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":91},\"wind\":{\"speed\":1.51,\"deg\":14,\"gust\":5.7},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-06 00:00:00\"},{\"dt\":1738810800,\"main\":{\"temp\":2.52,\"feels_like\":0.79,\"temp_min\":2.52,\"temp_max\":2.52,\"pressure\":1045,\"sea_level\":1045,\"grnd_level\":1041,\"humidity\":80,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":20},\"wind\":{\"speed\":1.74,\"deg\":25,\"gust\":6.57},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-06 03:00:00\"},{\"dt\":1738821600,\"main\":{\"temp\":1.89,\"feels_like\":-0.07,\"temp_min\":1.89,\"temp_max\":1.89,\"pressure\":1045,\"sea_level\":1045,\"grnd_level\":1040,\"humidity\":82,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":13},\"wind\":{\"speed\":1.85,\"deg\":29,\"gust\":6.57},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-06 06:00:00\"},{\"dt\":1738832400,\"main\":{\"temp\":2.65,\"feels_like\":0.41,\"temp_min\":2.65,\"temp_max\":2.65,\"pressure\":1045,\"sea_level\":1045,\"grnd_level\":1040,\"humidity\":79,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":26},\"wind\":{\"speed\":2.2,\"deg\":30,\"gust\":7.38},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-06 09:00:00\"},{\"dt\":1738843200,\"main\":{\"temp\":6.58,\"feels_like\":4,\"temp_min\":6.58,\"temp_max\":6.58,\"pressure\":1044,\"sea_level\":1044,\"grnd_level\":1039,\"humidity\":65,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":14},\"wind\":{\"speed\":3.65,\"deg\":38,\"gust\":6.73},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-06 12:00:00\"},{\"dt\":1738854000,\"main\":{\"temp\":7.57,\"feels_like\":5.05,\"temp_min\":7.57,\"temp_max\":7.57,\"pressure\":1042,\"sea_level\":1042,\"grnd_level\":1037,\"humidity\":58,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":6},\"wind\":{\"speed\":3.94,\"deg\":43,\"gust\":7.25},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-06 15:00:00\"},{\"dt\":1738864800,\"main\":{\"temp\":5.41,\"feels_like\":2.72,\"temp_min\":5.41,\"temp_max\":5.41,\"pressure\":1041,\"sea_level\":1041,\"grnd_level\":1037,\"humidity\":69,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":6},\"wind\":{\"speed\":3.41,\"deg\":37,\"gust\":8.25},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-06 18:00:00\"},{\"dt\":1738875600,\"main\":{\"temp\":3.66,\"feels_like\":0.71,\"temp_min\":3.66,\"temp_max\":3.66,\"pressure\":1040,\"sea_level\":1040,\"grnd_level\":1036,\"humidity\":80,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":5},\"wind\":{\"speed\":3.25,\"deg\":35,\"gust\":9.26},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-06 21:00:00\"},{\"dt\":1738886400,\"main\":{\"temp\":2.66,\"feels_like\":-0.06,\"temp_min\":2.66,\"temp_max\":2.66,\"pressure\":1038,\"sea_level\":1038,\"grnd_level\":1034,\"humidity\":85,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":4},\"wind\":{\"speed\":2.71,\"deg\":24,\"gust\":8.98},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-07 00:00:00\"},{\"dt\":1738897200,\"main\":{\"temp\":2.01,\"feels_like\":-0.74,\"temp_min\":2.01,\"temp_max\":2.01,\"pressure\":1036,\"sea_level\":1036,\"grnd_level\":1032,\"humidity\":92,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":9},\"wind\":{\"speed\":2.6,\"deg\":7,\"gust\":8.3},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-07 03:00:00\"},{\"dt\":1738908000,\"main\":{\"temp\":2.1,\"feels_like\":-1.11,\"temp_min\":2.1,\"temp_max\":2.1,\"pressure\":1035,\"sea_level\":1035,\"grnd_level\":1030,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":38},\"wind\":{\"speed\":3.17,\"deg\":7,\"gust\":7.85},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-07 06:00:00\"},{\"dt\":1738918800,\"main\":{\"temp\":2.93,\"feels_like\":-0.43,\"temp_min\":2.93,\"temp_max\":2.93,\"pressure\":1034,\"sea_level\":1034,\"grnd_level\":1029,\"humidity\":85,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.61,\"deg\":33,\"gust\":7.31},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-07 09:00:00\"},{\"dt\":1738929600,\"main\":{\"temp\":5.72,\"feels_like\":2.44,\"temp_min\":5.72,\"temp_max\":5.72,\"pressure\":1033,\"sea_level\":1033,\"grnd_level\":1028,\"humidity\":60,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":71},\"wind\":{\"speed\":4.58,\"deg\":44,\"gust\":6.18},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-07 12:00:00\"},{\"dt\":1738940400,\"main\":{\"temp\":4.96,\"feels_like\":1.91,\"temp_min\":4.96,\"temp_max\":4.96,\"pressure\":1032,\"sea_level\":1032,\"grnd_level\":1027,\"humidity\":61,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.83,\"deg\":49,\"gust\":5.91},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2025-02-07 15:00:00\"},{\"dt\":1738951200,\"main\":{\"temp\":4.61,\"feels_like\":1.84,\"temp_min\":4.61,\"temp_max\":4.61,\"pressure\":1031,\"sea_level\":1031,\"grnd_level\":1027,\"humidity\":58,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.28,\"deg\":57,\"gust\":5.04},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-07 18:00:00\"},{\"dt\":1738962000,\"main\":{\"temp\":4.54,\"feels_like\":2.68,\"temp_min\":4.54,\"temp_max\":4.54,\"pressure\":1032,\"sea_level\":1032,\"grnd_level\":1027,\"humidity\":54,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":2.15,\"deg\":51,\"gust\":3.52},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-07 21:00:00\"},{\"dt\":1738972800,\"main\":{\"temp\":4.2,\"feels_like\":4.2,\"temp_min\":4.2,\"temp_max\":4.2,\"pressure\":1031,\"sea_level\":1031,\"grnd_level\":1027,\"humidity\":53,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":1.33,\"deg\":25,\"gust\":2.08},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-08 00:00:00\"},{\"dt\":1738983600,\"main\":{\"temp\":3.46,\"feels_like\":3.46,\"temp_min\":3.46,\"temp_max\":3.46,\"pressure\":1031,\"sea_level\":1031,\"grnd_level\":1026,\"humidity\":53,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":74},\"wind\":{\"speed\":0.6,\"deg\":12,\"gust\":0.71},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2025-02-08 03:00:00\"}],\"city\":{\"id\":2643743,\"name\":\"London\",\"coord\":{\"lat\":51.5085,\"lon\":-0.1257},\"country\":\"GB\",\"population\":1000000,\"timezone\":0,\"sunrise\":1738568138,\"sunset\":1738601580}}";

        // Act
        Forecast[] forecasts = forecastJsonAdapter.parseForecast(sampleJson);

        // Assert
        assertNotNull("Forecast array should not be null", forecasts);
        assertEquals("Should return 40 forecasts", 40, forecasts.length);
        assertNotNull("First forecast should not be null", forecasts[0]);

        // Verify the first forecast object details
        assertEquals("Mon, 6 am", forecasts[0].getDateTime());
        assertEquals("Clouds", forecasts[0].getDescription());
        assertEquals(1.0, forecasts[0].getTemp(), 0);
        assertEquals(-1.0, forecasts[0].getFeelsLike(), 0);
        assertEquals(Math.round(1.94*3.6), forecasts[0].getWindSpeed(), 0);

        // check that "Atmosphere" description returns detailed version instead
        assertEquals("mist", forecasts[1].getDescription());

        System.out.println("Finished validJSONParsing successfully.");
    }

    @Test
    public void testParseForecast_InvalidJSON() {
        System.out.println("\nStarting invalidJSONParsing...");
        System.out.println("Expecting 1 error ot be thrown...");

        // Arrange - Malformed JSON (missing closing brace)
        String malformedJson = "{"
                + "\"cod\":\"200\","
                + "\"list\":["
                + "{"
                + "\"dt\":1738562400,"
                + "\"main\":{\"temp\":1.31,\"feels_like\":-0.86,\"humidity\":93},"
                + "\"weather\":[{\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],"
                + "\"wind\":{\"speed\":1.94,\"deg\":199},"
                + "\"dt_txt\":\"2025-02-03 06:00:00\""
                // Missing closing brace for list and root object
                ;

        int errorCount = 0;

        // Act & Assert (should throw exception)
        try {
            forecastJsonAdapter.parseForecast(malformedJson);
        } catch (InvalidJsonParsingException e) {
            System.out.println("Exception thrown!");
            errorCount++;
        }

        assertEquals(1, errorCount);
        System.out.println("Finished invalidJSONParsing. All exceptions were successfully thrown.\n");
        System.out.println("----- Finished ForecastJsonAdapterTest -----\n");
    }
}
